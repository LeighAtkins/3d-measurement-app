(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1583:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(3365),a=r(4357),s=r.n(a),i=r(2895),o=r.n(i),l=r(7535);function c(e){let{children:t}=e;return(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{className:"".concat(s().variable," ").concat(o().variable," antialiased"),children:(0,n.jsx)(l.OJ,{children:t})})})}r(6002)},2895:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},4357:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},6002:()=>{},7268:(e,t,r)=>{"use strict";r.d(t,{R2:()=>o,gH:()=>c});var n=r(8660);class a{setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){if(this.token)return this.token;{let e=localStorage.getItem("auth_token");if(e&&this.isTokenValid(e))return this.token=e,e}return null}isTokenValid(e){try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp>Date.now()}catch(e){return!1}}handleUnauthorized(){this.setToken(null),window.location.href="/login"}transformError(e){var t,r;let n={error:"Unknown error",status:(null==(t=e.response)?void 0:t.status)||500};return(null==(r=e.response)?void 0:r.data)?(n.error=e.response.data.error||e.response.data.message||e.message,n.message=e.response.data.message,n.details=e.response.data.details):e.message&&(n.error=e.message),n}async get(e,t){return(await this.client.get(e,t)).data}async post(e,t,r){return(await this.client.post(e,t,r)).data}async put(e,t,r){return(await this.client.put(e,t,r)).data}async delete(e,t){return(await this.client.delete(e,t)).data}constructor(e="http://localhost:8000"){this.token=null,this.client=n.A.create({baseURL:e,timeout:3e4,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>(this.token&&(e.headers.Authorization="Bearer ".concat(this.token)),e)),this.client.interceptors.response.use(e=>e,e=>{var t;throw(null==(t=e.response)?void 0:t.status)===401&&this.handleUnauthorized(),this.transformError(e)})}}let s=new a;class i{async signin(e){return this.client.post("/api/auth/signin",{email:e})}async verify(e,t){let r="/api/auth/verify?token=".concat(encodeURIComponent(e),"&email=").concat(encodeURIComponent(t)),n=await this.client.get(r);return n.token&&this.client.setToken(n.token),n}logout(){this.client.setToken(null),window.location.href="/login"}getCurrentUser(){let e=this.client.getToken();if(!e)return null;try{let t=JSON.parse(atob(e.split(".")[1]));return{id:t.userId,email:t.email,role:t.role,companyId:t.companyId}}catch(e){return null}}isAuthenticated(){return null!==this.client.getToken()}constructor(e=s){this.client=e}}let o=new i;class l{async list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;t.page&&r.append("page",t.page.toString()),t.limit&&r.append("limit",t.limit.toString()),t.status&&r.append("status",t.status);let n=r.toString(),a="/api/company/".concat(e,"/orders").concat(n?"?".concat(n):"");return this.client.get(a)}async get(e,t){return this.client.get("/api/company/".concat(e,"/orders/").concat(t))}async listClientOrders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;e.page&&t.append("page",e.page.toString()),e.limit&&t.append("limit",e.limit.toString()),e.status&&t.append("status",e.status);let r=t.toString();return this.client.get("/api/orders".concat(r?"?".concat(r):""))}async getClientOrder(e){return this.client.get("/api/orders/".concat(e))}constructor(e=s){this.client=e}}let c=new l;class u{async create(e,t,r){return this.client.post("/api/company/".concat(e,"/orders/").concat(t,"/measurements"),r)}async update(e,t,r,n){return this.client.put("/api/company/".concat(e,"/orders/").concat(t,"/measurements/").concat(r),n)}async updateValue(e,t,r){return this.client.put("/api/orders/".concat(e,"/measurements/").concat(t),r)}constructor(e=s){this.client=e}}new u},7535:(e,t,r)=>{"use strict";r.d(t,{OJ:()=>m,$n:()=>i,Zp:()=>o,Wu:()=>u,aR:()=>l,ZB:()=>c,kt:()=>d,As:()=>g});var n=r(3365),a=r(1521),s=r(4584);let i=e=>{let{variant:t="primary",size:r="md",loading:a=!1,disabled:i,className:o,children:l,...c}=e;return(0,n.jsxs)("button",{className:(0,s.$)("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t],{sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r],o),disabled:i||a,...c,children:[a&&(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})},o=e=>{let{children:t,className:r,padding:a="md"}=e;return(0,n.jsx)("div",{className:(0,s.$)("bg-white rounded-lg border border-gray-200 shadow-sm",{sm:"p-3",md:"p-6",lg:"p-8"}[a],r),children:t})},l=e=>{let{children:t,className:r}=e;return(0,n.jsx)("div",{className:(0,s.$)("mb-4",r),children:t})},c=e=>{let{children:t,className:r}=e;return(0,n.jsx)("h3",{className:(0,s.$)("text-lg font-semibold text-gray-900",r),children:t})},u=e=>{let{children:t,className:r}=e;return(0,n.jsx)("div",{className:(0,s.$)(r),children:t})},d=e=>{let{size:t="md",className:r}=e;return(0,n.jsx)("div",{className:(0,s.$)("animate-spin rounded-full border-b-2 border-blue-600",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t],r)})};var h=r(7268);let p=(0,a.createContext)(void 0),m=e=>{let{children:t}=e,[r,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=h.R2.getCurrentUser();e&&s(e),o(!1)},[]),(0,n.jsx)(p.Provider,{value:{user:r,loading:i,login:(e,t)=>{s(t)},logout:()=>{h.R2.logout(),s(null)},isAuthenticated:!!r},children:t})},g=()=>{let e=(0,a.useContext)(p);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8366:(e,t,r)=>{Promise.resolve().then(r.bind(r,1583))}},e=>{var t=t=>e(e.s=t);e.O(0,[968,851,347,870,358],()=>t(8366)),_N_E=e.O()}]);